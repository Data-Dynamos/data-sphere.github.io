"use strict";(self.webpackChunkdata_dynamos_github_io=self.webpackChunkdata_dynamos_github_io||[]).push([[2799],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>k});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=d(a),m=r,k=p["".concat(s,".").concat(m)]||p[m]||c[m]||l;return a?n.createElement(k,i(i({ref:t},u),{},{components:a})):n.createElement(k,i({ref:t},u))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[p]="string"==typeof e?e:r,i[1]=o;for(var d=2;d<l;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},9283:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var n=a(7462),r=(a(7294),a(3905));const l={sidebar_position:1},i="SQL: A Quick Review",o={unversionedId:"SQL/sql-quick-review",id:"SQL/sql-quick-review",title:"SQL: A Quick Review",description:"SQL is a programming language used to manage and manipulate relational databases. It is used to create, read, update, and delete data in a database. SQL is widely used in data analysis, business intelligence, and web development. Its syntax is simple and easy to understand, making it a popular choice for data professionals.",source:"@site/docs/SQL/sql-quick-review.mdx",sourceDirName:"SQL",slug:"/SQL/sql-quick-review",permalink:"/data-sphere.github.io/docs/SQL/sql-quick-review",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/SQL/sql-quick-review.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Data Formats",permalink:"/data-sphere.github.io/docs/The-Art-of-Data-Engineering:Crafting-Robust-and-Scalable-Solutions/data-formats"},next:{title:"Advanced SQL: Window and Aggregate Functions",permalink:"/data-sphere.github.io/docs/SQL/advance-sql"}},s={},d=[{value:"SQL Nutshell \ud83c\udf0f",id:"sql-nutshell-",level:2},{value:"Creating Tables",id:"creating-tables",level:3},{value:"Creating Views",id:"creating-views",level:3},{value:"Reserved &amp; Limited Keywords",id:"reserved--limited-keywords",level:2},{value:"Join types",id:"join-types",level:2},{value:"INNER JOIN",id:"inner-join",level:3},{value:"LEFT \u201cOUTER\u201d JOIN",id:"left-outer-join",level:3},{value:"RIGHT \u201cOUTER\u201d JOIN",id:"right-outer-join",level:3},{value:"LEFT ANTI SEMI JOIN and LEFT OUTER JOIN (with exclusion)",id:"left-anti-semi-join-and-left-outer-join-with-exclusion",level:3},{value:"CROSS JOIN",id:"cross-join",level:3},{value:"Overview",id:"overview",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Key Points",id:"key-points",level:2},{value:"Extracting Year from a Date String in SQL",id:"extracting-year-from-a-date-string-in-sql",level:2},{value:"Function Explanation",id:"function-explanation",level:3},{value:"SQL Query Example",id:"sql-query-example",level:3},{value:"Expected Output",id:"expected-output",level:3}],u={toc:d},p="wrapper";function c(e){let{components:t,...l}=e;return(0,r.kt)(p,(0,n.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"sql-a-quick-review"},"SQL: A Quick Review"),(0,r.kt)("h1",{id:"basic-sql"},"Basic SQL"),(0,r.kt)("p",null,"SQL is a programming language used to manage and manipulate relational databases. It is used to create, read, update, and delete data in a database. SQL is widely used in data analysis, business intelligence, and web development. Its syntax is simple and easy to understand, making it a popular choice for data professionals."),(0,r.kt)("div",{style:{textAlign:"center"}},(0,r.kt)("p",null,(0,r.kt)("img",{alt:"sql-joins.png",src:a(4171).Z,width:"1440",height:"836"}))),(0,r.kt)("h2",{id:"sql-nutshell-"},"SQL Nutshell \ud83c\udf0f"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"sql-joins.png",src:a(9386).Z,width:"800",height:"1000"})),(0,r.kt)("h3",{id:"creating-tables"},"Creating Tables"),(0,r.kt)("p",null,"To create a table in Snowflake, use the following syntax:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE table_name (\n  column1 data_type,\n  column2 data_type,\n  ...\n);\n")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE customers (\n  customer_id INT,\n  customer_name VARCHAR,\n  email VARCHAR,\n  phone_number VARCHAR\n);\n\nCREATE TABLE orders (\n  order_id INT,\n  customer_id INT,\n  order_date DATE,\n  total_amount DECIMAL(10, 2)\n);\n")),(0,r.kt)("h3",{id:"creating-views"},"Creating Views"),(0,r.kt)("p",null,"To create a view in Snowflake, use the following syntax:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE VIEW view_name AS\nSELECT column1, column2, ...\nFROM table_name\nWHERE condition;\n")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE VIEW order_details AS\nSELECT o.order_id,\n       o.order_date,\n       c.customer_name,\n       c.email\nFROM orders AS o\nINNER JOIN customers AS c\n   ON o.customer_id = c.customer_id;\n")),(0,r.kt)("p",null,"Note: Replace ",(0,r.kt)("inlineCode",{parentName:"p"},"table_name"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"view_name"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"column1"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"column2"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"condition")," with the appropriate names and conditions for your use case."),(0,r.kt)("h2",{id:"reserved--limited-keywords"},"Reserved & Limited Keywords"),(0,r.kt)("p",null,"Snowflake SQL reserves all ANSI keywords (with the exception of type keywords such as CHAR, DATE, DECIMAL, etc.), as well as some additional keywords (ASC, DESC, MINUS, etc.) that are reserved by other popular databases. Additionally, Snowflake reserves keywords REGEXP and RLIKE (which function like the ANSI reserved keyword LIKE) and SOME (which is a synonym for the ANSI reserved keyword ANY)."),(0,r.kt)("p",null,"To avoid parsing ambiguities, Snowflake SQL also prohibits the use of keywords such as LEFT, OUTER, JOIN, etc. as table names or aliases in the FROM list, and the use of keywords such as TRUE, FALSE, CASE, etc. as column references in scalar expressions."),(0,r.kt)("p",null,"eg. ACCOUNT,BETWEEN,SAMPLE,TABLE,WHENEVER "),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://docs.snowflake.com/en/sql-reference/reserved-keywords"},"Referrence Link")),(0,r.kt)("h2",{id:"join-types"},"Join types"),(0,r.kt)("p",null,"Data cleansing and enrichment processes need to combine, filter, aggregate, and select different sets to answer questions we have. That translates into knowing how to perform different types of JOINs and WHERE clauses to simple SELECT statements. First and foremost, we need to get up to speed with JOINs."),(0,r.kt)("p",null,"Let\u2019s imagine for a minute that we have customers and orders tables, which are related by the ",(0,r.kt)("inlineCode",{parentName:"p"},"customers_id")," field:"),(0,r.kt)("div",{style:{textAlign:"center"}},(0,r.kt)("p",null,(0,r.kt)("img",{alt:"sql-joins.png",src:a(9676).Z,width:"512",height:"362"}))),(0,r.kt)("h3",{id:"inner-join"},"INNER JOIN"),(0,r.kt)("p",null,"You want all orders but also want to know the name of the customer who ordered."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT a.order_id\n     , a.customer_id\n     , b.customer_name\nFROM example.orders AS a\nINNER JOIN example.customers AS b\n   ON a.customer_id = b.customer_id;\n")),(0,r.kt)("h3",{id:"left-outer-join"},"LEFT \u201cOUTER\u201d JOIN"),(0,r.kt)("p",null,"In this case, you want all orders, even if they have a customer associated or not (let\u2019s not dig into data integrity issues here for the sake of simplicity of this example)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT o.order_id\n     , o.customer_id\n     , c.customer_name\nFROM example.orders AS o\nLEFT [OUTER] JOIN example.customers AS c\n   ON o.customer_id = c.customer_id;\n")),(0,r.kt)("p",null,"Some database engines do not require you to specify ",(0,r.kt)("inlineCode",{parentName:"p"},"OUTER"),"."),(0,r.kt)("h3",{id:"right-outer-join"},"RIGHT \u201cOUTER\u201d JOIN"),(0,r.kt)("p",null,"All customers with or without any orders."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT o.order_id\n     , o.customer_id\n     , c.customer_name\nFROM example.orders AS o\nRIGHT [OUTER] JOIN example.customers AS c\n   ON o.customer_id = c.customer_id;\n")),(0,r.kt)("p",null,"Order is important for LEFT and RIGHT join. This query will bring us all ",(0,r.kt)("inlineCode",{parentName:"p"},"example.customers")," rows and whatever matches with ",(0,r.kt)("inlineCode",{parentName:"p"},"example.orders"),"."),(0,r.kt)("h3",{id:"left-anti-semi-join-and-left-outer-join-with-exclusion"},"LEFT ANTI SEMI JOIN and LEFT OUTER JOIN (with exclusion)"),(0,r.kt)("p",null,"Let\u2019s say you want all customers who haven\u2019t ordered anything yet."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT c.customer_id\n     , c.customer_name\nFROM example.customers AS c\nWHERE NOT EXISTS (SELECT o.customer_id\n                  FROM example.orders AS o\n                  WHERE c.customer_id=o.customer_id);\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT c.customer_id\n     , c.customer_name\nFROM example.customers AS c\nLEFT [OUTER] JOIN example.orders AS o\n   ON c.customer_id = o.customer_id\nWHERE o.customer_id IS NULL;\n")),(0,r.kt)("p",null,"Always do performance tests on your queries and subqueries. Join performance depends on table structure, indexes, and generated query plans."),(0,r.kt)("h3",{id:"cross-join"},"CROSS JOIN"),(0,r.kt)("p",null,"Cross join returns the Cartesian product of both tables, meaning it will bring all possible combinations between all the elements of both sets."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT c.customer_id\n    , c.customer_name\n    , o.order_id\nFROM example.orders AS o\nCROSS JOIN example.customers AS c;\n")),(0,r.kt)("p",null,"There are other ways to combine datasets, but both query parts need to have the same structure:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"UNION"),(0,r.kt)("li",{parentName:"ul"},"UNION ALL"),(0,r.kt)("li",{parentName:"ul"},"EXCEPT"),(0,r.kt)("li",{parentName:"ul"},"INTERSECT")),(0,r.kt)("h1",{id:"datatype-cast-in-sql"},"Datatype Cast in SQL"),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"Datatype casting in SQL is used to convert values from one data type to another. It's essential for handling data stored in various formats."),(0,r.kt)("h2",{id:"syntax"},"Syntax"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"CAST()")," function is commonly used for casting:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CAST(expression AS target_datatype)\n")),(0,r.kt)("p",null,"Alternatively, use the shorthand ",(0,r.kt)("inlineCode",{parentName:"p"},"::")," operator:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"expression::target_datatype\n")),(0,r.kt)("h2",{id:"key-points"},"Key Points"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Casting aligns with ",(0,r.kt)("inlineCode",{parentName:"li"},"TO_datatype")," conversion functions."),(0,r.kt)("li",{parentName:"ul"},"An error is raised if the cast is not possible due to data type incompatibility."),(0,r.kt)("li",{parentName:"ul"},"Examples:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Convert string to integer: ",(0,r.kt)("inlineCode",{parentName:"li"},"CAST('123' AS INT)")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"'123'::INT"),"."),(0,r.kt)("li",{parentName:"ul"},"Convert date to string: ",(0,r.kt)("inlineCode",{parentName:"li"},"CAST(NOW() AS VARCHAR)")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"NOW()::VARCHAR"),".")))),(0,r.kt)("h2",{id:"extracting-year-from-a-date-string-in-sql"},"Extracting Year from a Date String in SQL"),(0,r.kt)("p",null,"In SQL, you can convert a date string to a timestamp and then extract the year part from it. This is particularly useful when you have date information as a string and need to extract specific components like the year."),(0,r.kt)("h3",{id:"function-explanation"},"Function Explanation"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"to_timestamp(\"DATE\", 'MM-dd-yyyy')"),": Converts a date string in the 'MM-dd-yyyy' format to a timestamp. For example, '12-25-2020' would be converted to a timestamp representing 25th December 2020."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"year(...)"),": Extracts the year part from the timestamp.")),(0,r.kt)("h3",{id:"sql-query-example"},"SQL Query Example"),(0,r.kt)("p",null,"Consider a table named ",(0,r.kt)("inlineCode",{parentName:"p"},"example_table")," with a column ",(0,r.kt)("inlineCode",{parentName:"p"},"DATE")," containing date strings in the 'MM-dd-yyyy' format. To select these dates and extract the year from each one, use the following SQL query:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT \n    DATE, \n    year(to_timestamp(DATE, 'MM-dd-yyyy')) AS Year \nFROM \n    example_table;\n")),(0,r.kt)("h3",{id:"expected-output"},"Expected Output"),(0,r.kt)("p",null,"Given the following sample data in ",(0,r.kt)("inlineCode",{parentName:"p"},"example_table"),":"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"DATE"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"12-25-2020")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"07-04-2019")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"01-01-2018")))),(0,r.kt)("p",null,"The query would return:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"DATE"),(0,r.kt)("th",{parentName:"tr",align:null},"Year"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"12-25-2020"),(0,r.kt)("td",{parentName:"tr",align:null},"2020")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"07-04-2019"),(0,r.kt)("td",{parentName:"tr",align:null},"2019")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"01-01-2018"),(0,r.kt)("td",{parentName:"tr",align:null},"2018")))),(0,r.kt)("p",null,"This method allows you to efficiently extract the year from a date string formatted as 'MM-dd-yyyy' in SQL."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Note:")," "),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"Familiarize with your SQL database's supported data types."),(0,r.kt)("li",{parentName:"ul"},"Validate data before casting to prevent errors."),(0,r.kt)("li",{parentName:"ul"},"Be aware of potential data truncation or rounding in some conversions."))),(0,r.kt)("p",null,"If you want to change granularity levels on your data and also summarize it, go ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/SQL_window_function"},"here")," and ",(0,r.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/sql/relational-databases/window-functions/quickstart-window-functions-by-example?view=sql-server-ver15"},"here")," to start your learning path."),(0,r.kt)("p",null,"Many core concepts can be learned from websites like ",(0,r.kt)("a",{parentName:"p",href:"https://www.w3schools.com/sql/default.asp"},"W3C"),". If you want to challenge yourself with practical exercises, you can take a look ",(0,r.kt)("a",{parentName:"p",href:"https://pgexercises.com/"},"here")," too."))}c.isMDXComponent=!0},9676:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/sql-joins-257fdb1eae13bf18ba0e44baeae38b2b.png"},4171:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/sql-meme-b7d664a9f05fa2b055d1799ed7dda758.jpeg"},9386:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/sql-844601eeac3b68b76bf8300e280fa0d5.gif"}}]);